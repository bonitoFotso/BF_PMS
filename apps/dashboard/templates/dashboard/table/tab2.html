{% load static %}
<div class="card card-flush h-xl-100">
    <!--begin::Header-->
    <div class="card-header pt-7">
      <!--begin::Title-->
      <h3 class="card-title align-items-start flex-column">
        <span class="card-label fw-bold text-gray-800">Client</span>
        <span class="text-gray-400 mt-1 fw-semibold fs-6">{{clients.count}}</span>
      </h3>
      <!--end::Title-->
      <!--begin::Toolbar-->

      <!--end::Toolbar-->
    </div>
    <!--end::Header-->
    <!--begin::Body-->
    <div class="card-body pt-3 pb-4">
      <!--begin::Table container-->
      <div class="table-responsive">
        <!--begin::Table-->
        <table data-order='[[ 1, "asc" ]]' class="table align-middle table-row-dashed fs-6 gy-5" id="clients_table">
          <thead>
              <tr class="text-start text-muted fw-bold fs-7 text-uppercase gs-0">
                  <th class="w-10px pe-2">
                      <div class="form-check form-check-sm form-check-custom form-check-solid me-3">
                          <input class="form-check-input" type="checkbox" data-kt-check="true" data-kt-check-target="#kt_table_users .form-check-input" value="1" />
                      </div>
                  </th>
                  {% for tf in fields %}
                      <th class="min-w-100px"> {{tf}} </th>
                      {% endfor %}
                      <th class="min-w-100px"> Agences </th>
                  
              </tr>
          </thead>
          <tbody class="text-gray-600 fw-semibold">
              {% for t in clients %}
              <tr>
                  <td>
                      <div class="form-check form-check-sm form-check-custom form-check-solid">
                          <input class="form-check-input" type="checkbox" value="1" />
                      </div>
                  </td>
                  <td class="d-flex align-items-center">
                      <!--begin:: Avatar -->
                      
                      <!--end::Avatar-->
                      <!--begin::User details-->
                      <div class="d-flex flex-column">
                          <a href="/client/{{t.id}}/detail" class="text-gray-800 text-hover-primary mb-1">{{t.name}}</a>
                          <span>{{t.email}}</span>
                          <span>{{t.phone}}</span>
                         
                      </div>
                      <!--begin::User details-->
                  </td>
                  <td>{{t.responsable}}</td>
                  <td>{{t.address}} <br>
                      <span>{{t.city}}</span>
                  </td>
                  <td> {% for ag in t.agence_set.all %}
                    <a class="text-gray-800 text-hover-primary mb-1" href="/agence/{{ag.id}}/detail">{{ag.name}}</a>

                
                    {% endfor %}
                    

                  </td>
                  
              </tr>
              {% endfor %}

          </tbody>
      </table>
      </div>
      <!--end::Table container-->
    </div>
    <!--end: Card Body-->
  </div>